# 多线程日志

## Requirements
* C++11
* Linux or OS X or Windows

## 性能
O2优化,

单线程写100万条日志600ms左右,多线程速度可提高到每100万日志300-400ms左右

但线程过多(大概超过20个)可能会退化到单线程的水平.

## 简单原理
每个生产者线程在格式化日志数据的时候是不需要锁的，因为访问的是thread-local数据.

每个生产者线程有独立的buffer，通过thread id来索引.

buffer自身是"无锁"的，保证了更高的速度。

