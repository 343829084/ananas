CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

EXECUTE_PROCESS(COMMAND protoc --cpp_out=./ ananas_rpc.proto  -I/usr/local/include -I./
                WORKING_DIRECTORY ${PROJECT_SOURCE_DIR}/protobuf_rpc)

INCLUDE(${PROJECT_SOURCE_DIR}/CMakeCommon)

INCLUDE_DIRECTORIES(${PROJECT_SOURCE_DIR})
INCLUDE_DIRECTORIES(/usr/local/Cellar/protobuf/3.2.0/include/)

AUX_SOURCE_DIRECTORY(. ANANAS_RPC_SRC)
SET(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)
SET(ANANAS_RPC ananas_rpc)

ADD_LIBRARY(${ANANAS_RPC} ${ANANAS_RPC_SRC})
TARGET_LINK_LIBRARIES(${ANANAS_RPC}; ananas)
ADD_DEPENDENCIES(${ANANAS_RPC} ananas)
SET_TARGET_PROPERTIES(${ANANAS_RPC} PROPERTIES LINKER_LANGUAGE CXX)
